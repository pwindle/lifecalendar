<html lang="en" encoding="utf-8">
<head>

	<!--link rel="stylesheet" type="text/css" href="/Inter-3.9/Inter(web)/inter.css"-->


	<meta charset="utf-8"/>
	<style>
	@import url('./Inter-3.9/Inter(web)/inter.css');
		html {
			text-align: center;
			font-family: 'Inter', Helvetica, Arial, sans-serif;
			font-weight:600;
		}
		@supports (font-variation-settings: normal) {
			html { 
				font-family: 'Inter var', Helvetica, Arial, sans-serif; 
			}
		}
		body {
		
			width: 111.2em;
			
		}
		h1 {
			font-size: 3.7em;
			margin:0;
		}
		#calendar {
			margin: 0 5em;
			display: grid;
			grid-template-columns: repeat(53, 1fr);
			grid-gap: 4px 4px;
			width: 103.15em; 
			/* width: 125.15em; */
		}
		.row { 
			height: 1.6em;
			display:flex;
			align-items: center;
			justify-content: center;
		}
		.col {
			height: 1.6em;
			
			max-width: 1.6em;
			display:flex;
			justify-content: center;
			margin-bottom: 0;
		}
		.col p {
			margin:0;
		}
		.week {
			display: flex;
			align-items: center;
			justify-content: center;
			border: 1px solid #000;
			padding: 0;
			height: 1.6em;
			max-width: 1.6em;
			background-color: #f5f7f9;
		}
		#now90 {
			text-align: right;
			display: flex;
			flex-flow: column;
			width: fit-content;
			position:absolute;
			top:0;
			right:0;
		}
		
		.highlighted {
			/* background-color: #333; */
		}
	</style>
	
</head>


<body>

<div id="dob">
	<h2 style="margin:0;">DOB:</h2>
	<label for="day">Day:&nbsp;</label><input class="dobinput" placeholder="31" id="dob_day" type="number" step="1" min="1" max="31"/>
	<label for="month">Month:&nbsp;</label><input class="dobinput" placeholder="12" id="dob_month" type="number" step="1" min="1" max="12"/>
	<label for="year">Year:&nbsp;</label><input class="dobinput" placeholder="2019" id="dob_year" type="number" step="1" min="1929" max="2019"/>
</div>
<div style="position:relative">
	<p style="position:absolute; bottom:0; text-align:left; margin:0 0 0 7em;">WEEK OF THE YEAR ---></p>
	<h1>LIFE CALENDAR</h1>
</div>
<div style="position:relative;">
	<p style="position:absolute; top:6em; left:-2.5em; transform: rotate(90deg);">YEAR OF YOUR LIFE ---></p>
	<div id="calendar"></div>
</div>
<div style="position:relative;">
	<h2><a href="https://waitbutwhy.com/2014/05/life-weeks.html">WAIT BUT WHY</a></h2>
	<div id="now90">
		<p style="text-align:center; padding:0; margin:0; line-height: 1em; font-size:1.5em;">NOW</p>
		<p style="text-align:center; padding:0; margin:0; line-height: 1em;">YOU'RE</p>
		<p style="text-align:center; padding:0; margin: 0; line-height:.9em; font-size: 3.4em;">90</p>
	</div>
</div>

	<script type="text/javascript">
	
	
	
		var _div_calendar = document.querySelector("#calendar");
		_div_calendar.appendChild(document.createElement('div'));
		
		for ( var i = 1; i <= 52; i++ ) {
		
			var _div_week_col = document.createElement('div');
			_div_week_col.classList.add('col');
			_div_week_col.classList.add('col' + i);
			_div_calendar.appendChild(_div_week_col);
			var _txt = document.createElement('p');
			_txt.innerText = i;
			_div_week_col.appendChild(_txt);
		}
		
		for ( var i = 0; i < 52 * 90; i++ ) {
			if ( i % 52 === 0 ) {
				var _div_week_row = document.createElement('div');
				_div_week_row.classList.add('row');
				_div_week_row.classList.add('row' + i);
				_div_calendar.appendChild(_div_week_row);
				var _txt = document.createElement('p');
				_txt.innerText = i / 52;
				_div_week_row.appendChild(_txt);
			}
			var _div_week = document.createElement('div');
			_div_week.classList.add('week');
			_div_week.classList.add('week' + i);
			_div_calendar.appendChild(_div_week);
		}
		
		const dob_day = document.querySelector('#dob_day');
		const dob_month = document.querySelector('#dob_month');
		const dob_year = document.querySelector('#dob_year');
		dob_day.addEventListener('input', refresh_calendar);
		dob_month.addEventListener('input', refresh_calendar);
		dob_year.addEventListener('input', refresh_calendar);
		
		
		
		function refresh_calendar() 
		{
		
			var highlighted_count = document.querySelectorAll(".highlighted").length;
			
			
			var day = document.querySelector("#dob_day").value != "" ? document.querySelector("#dob_day").value : 30;
			var month = document.querySelector("#dob_month").value != "" ? document.querySelector("#dob_month").value : 12;
			var year = document.querySelector("#dob_year").value != "" ? document.querySelector("#dob_year").value : 2019;
			
			var dob = year + "-" + month + "-" + day;
			// dob = dob.replace(/(?<=-)(\d{1}$)/, "0$&")
			// dob = dob.replace(/(?<=-)(\d{1})/, "0$&")
			dob = Date.parse(dob);
			
			var now = Date.now();
			var weeks = (now - dob) / 60 / 60 / 24 / 7 / 1000;
			
			var highlighted_diff = Math.floor(Math.abs(highlighted_count - weeks));
			if (highlighted_count > weeks) {
				// remove highlights from tail
				var highlighted_last_item = document.querySelectorAll(".highlighted").item(highlighted_count-1);
				for ( var i = 0; i < highlighted_diff; i++ ) {
					// highlighted_count - highlighted_diff
					var week = document.querySelector(".week" + (highlighted_count - i));
					week.classList.remove("highlighted");
					week.innerHTML = "";
				}
			}
			else {
				// remove highlights from tail
				var highlighted_last_item = document.querySelectorAll(".highlighted").item(highlighted_count-1);
				for ( var i = 0; i < highlighted_diff; i++ ) {
					// highlighted_count - highlighted_diff
					var week = document.querySelector(".week" + (highlighted_count + 1 + i));
					week.classList.add("highlighted");
					week.innerHTML = "&cross;";
				}
			}
		}
		
	</script>

</body>

</html>