<html lang="en" encoding="utf-8">
<head>

	<!--link rel="stylesheet" type="text/css" href="/Inter-3.9/Inter(web)/inter.css"-->


	<meta charset="utf-8"/>
	<style>
	@import url('./Inter-3.9/Inter(web)/inter.css');
		html {
			text-align: center;
			font-family: 'Inter', Helvetica, Arial, sans-serif;
			font-weight:600;
		}
		@supports (font-variation-settings: normal) {
			html { 
				font-family: 'Inter var', Helvetica, Arial, sans-serif; 
			}
		}
		body {
		
			width: 111.2em;
			
		}
		h1 {
			font-size: 3.7em;
			margin:0;
		}
		#calendar {
			margin: 0 5em;
			display: grid;
			grid-template-columns: repeat(53, 1fr);
			grid-gap: 4px 4px;
			width: 103.15em; 
			/* width: 125.15em; */
		}
		.row { 
			height: 1.6em;
			display:flex;
			align-items: center;
			justify-content: center;
		}
		.col {
			height: 1.6em;
			
			max-width: 1.6em;
			display:flex;
			justify-content: center;
			margin-bottom: 0;
		}
		.col p {
			margin:0;
		}
		.week {
			display: flex;
			align-items: center;
			justify-content: center;
			border: 1px solid #000;
			padding: 0;
			height: 1.6em;
			max-width: 1.6em;
			background-color: #f5f7f9;
		}
		#now90 {
			text-align: right;
			display: flex;
			flex-flow: column;
			width: fit-content;
			position:absolute;
			top:0;
			right:0;
		}
		
		.highlighted {
			background-color: #ccc;
		}
		
		.landscape { 
			transform-origin: top right;
			transform: rotate(-90deg) translateY(-50%) scale(.5);
		}
	</style>
	
</head>


<body>

<div>
	<h2 style="margin:0;">DOB:</h2>
	<input type="date" id="dob" name="dob"
		value="2018-07-22"
		min="1900-01-01"
		max="2100-12-31">
</div>
<div id="orientation">
	<label>Landscape Mode</label><input type="checkbox" id="landscape" name="landscape" value="checked"/>
</div>
<div id="orient">
	<div style="position:relative">
		<p style="position:absolute; bottom:0; text-align:left; margin:0 0 0 7em;">WEEK OF THE YEAR ---></p>
		<h1>LIFE CALENDAR</h1>
	</div>
	<div style="position:relative;">
		<p style="position:absolute; top:6em; left:-2.5em; transform: rotate(90deg);">YEAR OF YOUR LIFE ---></p>
		<div id="calendar"></div>
	</div>
	<div style="position:relative;">
		<h2><a href="https://waitbutwhy.com/2014/05/life-weeks.html">WAIT BUT WHY</a></h2>
		<div id="now90">
			<p style="text-align:center; padding:0; margin:0; line-height: 1em; font-size:1.5em;">NOW</p>
			<p style="text-align:center; padding:0; margin:0; line-height: 1em;">YOU'RE</p>
			<p style="text-align:center; padding:0; margin: 0; line-height:.9em; font-size: 3.4em;">90</p>
		</div>
	</div>
</div>

	<script type="text/javascript">
	
	
	
		var _div_calendar = document.querySelector("#calendar");
		_div_calendar.appendChild(document.createElement('div'));
		
		for ( var i = 1; i <= 52; i++ ) {
		
			var _div_week_col = document.createElement('div');
			_div_week_col.classList.add('col');
			_div_week_col.classList.add('col' + i);
			_div_calendar.appendChild(_div_week_col);
			var _txt = document.createElement('p');
			_txt.innerText = i;
			_div_week_col.appendChild(_txt);
		}
		
		for ( var i = 0; i < 52 * 90; i++ ) {
			if ( i % 52 === 0 ) {
				var _div_week_row = document.createElement('div');
				_div_week_row.classList.add('row');
				_div_week_row.classList.add('row' + i);
				_div_calendar.appendChild(_div_week_row);
				var _txt = document.createElement('p');
				_txt.innerText = i / 52;
				_div_week_row.appendChild(_txt);
			}
			var _div_week = document.createElement('div');
			_div_week.classList.add('week');
			_div_week.classList.add('week' + i);
			_div_calendar.appendChild(_div_week);
		}
		
		
		const landscape = document.querySelector('input#landscape');
		landscape.addEventListener('input', orient);
		
		function orient()
		{
			if (landscape.checked) {
				var orient = document.querySelector('#orient');
				orient.classList.add("landscape");
				var row = document.querySelectorAll(".row");
				for (i = 0; i < row.length; ++i) {
					row[i].style.transform = "rotate(90deg)";
				}
				var col = document.querySelectorAll(".col");
				for (i = 0; i < col.length; ++i) {
					col[i].style.transform = "rotate(90deg)";
					col[i].style.height = "unset";
				}
				document.querySelector("#now90").style.transform = "rotate(90deg)";
			}
			else {
				var orient = document.querySelector('#orient');
				orient.classList.remove("landscape");
				var row = document.querySelectorAll(".row");
				for (i = 0; i < row.length; ++i) {
					row[i].style.transform = "rotate(0deg)";
				}
				var col = document.querySelectorAll(".col");
				for (i = 0; i < col.length; ++i) {
					col[i].style.transform = "rotate(0deg)";
					col[i].style.height = "";
				}
				document.querySelector("#now90").style.transform = "rotate(0deg)";
			}
		}
		
		const dob = document.querySelector('input#dob');
		dob.addEventListener('input', refresh_calendar);
		
		
		
		function refresh_calendar() 
		{
		
			var highlighted_count = document.querySelectorAll(".highlighted").length;
			
			
			var dob = document.querySelector("input#dob").value;
			
			dob = Date.parse(dob);
			
			var now = Date.now();
			var weeks = (now - dob) / 60 / 60 / 24 / 7 / 1000;
			weeks = Math.floor(weeks);
			
			var highlighted_diff = Math.floor(Math.abs(highlighted_count - weeks));
			if (highlighted_count > weeks) {
				// remove highlights from tail
				var highlighted_last_item = document.querySelectorAll(".highlighted").item(highlighted_count-1);
				for ( var i = 0; i < highlighted_diff; i++ ) {
					// highlighted_count - highlighted_diff
					var week = document.querySelector(".week" + (highlighted_count - 1 - i));
					week.classList.remove("highlighted");
					week.innerHTML = "";
				}
			}
			else {
				// add highlights to tail
				var highlighted_last_item = document.querySelectorAll(".highlighted").item(highlighted_count-1);
				for ( var i = 0; i < highlighted_diff; i++ ) {
					// highlighted_count - highlighted_diff
					var week = document.querySelector(".week" + (highlighted_count + i));
					week.classList.add("highlighted");
					week.innerHTML = "&cross;";
				}
			}
		}
		
	</script>

</body>

</html>